<!-- TODO Refactor question_detail.html and children templates.
BODY templates/questions/question_detail.html
BODY and templates/questions/item_partial.html need refactoring.
BODY Their structure is convoluted and confusing.
 -->
{% extends "base_study.html" %}
{% load render_bundle from webpack_loader %}

{% block styles %}
    <!-- Webpack bundle: "topics" CSS -->
    {% render_bundle 'questions' 'css' %}
{% endblock styles %}

{% block scripts %}
{% endblock %}
{% block title %}
    {{ question.instrument.title }}/{{ question.name }}
{% endblock %}
{% block content %}
    {{ question_items|json_script:"question-meta" }}
    <div class="row">
        <div class="col-xl-9">
            <div class="card">
                <div class="card-header">
                    <h2 class="text-center">{{ question.name }}</h2>
                </div>
                <div class="card-body" id="question-items">
                </div>
            </div>
            {% include "questions/related_questions.html" with question_list=related_questions table_name="Related questions" %}
        </div>
        <div class="col-xl-3">
            {% include "questions/question_info.html" %}
            <div class="card">
                <div class="card-header"><b>Variables</b>
                </div>
                {% if variables %}
                    <div class="list-group">
                        {% for variable in variables %}
                            {% include "data/variable_result.html" %}
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="card-body">
                        <p>no related variables found</p>
                    </div>
                {% endif %}
            </div>
            <div class="card">
                <div class="card-header"><b>Concepts</b>
                </div>
                <div class="list-group"></div>
                {% if concept_list %}
                    <div class="list-group">
                        {% for concept in concept_list %}
                            {% include "concepts/concept_result.html" %}
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="card-body">
                        <p>no related concepts found</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% render_bundle 'questions' 'js' %}
{% endblock content %}
