{% extends "base_study.html" %}
{% load render_bundle from webpack_loader %}

{% block styles %}
    {% render_bundle 'instrument_table' 'css' %}
{% endblock styles %}

{% block title %}
    {{ study.name }}
{% endblock %}

{% block content %}

    <div id="study-name" value="{{ study.name }}"></div>

    <div class="row">
        <div class="col-lg-9">
            {{ study.html_description | safe }}
        </div>
        <div class="col-lg-3">
            <div class="card info-panel">
                <div class="card-header">
                    <b>Study info</b>
                </div>
                <div class="card-body">
                    <p>Name: {{ study.name }}</p>
                    <p>Label: {{ study.label }}</p>
                    <p>Datasets: {{ num_datasets }}</p>
                    <p>Variables: {{ num_variables }}</p>
                    <p>Instruments: {{ num_instruments }}</p>
                    <p>Questions: {{ num_questions }}</p>
                    {% include "publications/attachments_partial.html" with attachments=study.attachments %}
                </div>
            </div>
        </div>
    </div>

    <h2 class="anchor" id="datasets">Datasets</h2>
    <table id="dataset-table" class="table table-striped table-bordered">
        <thead>
            <tr class="search-header">
                <th class="dataset"></th>
                <th class="label"></th>
                <th class="conceptual-dataset"></th>
                <th class="period"></th>
                <th class="analysis-unit"></th>
            </tr>
            <tr class="header">
                <th title="dataset" class="dataset">Dataset</th>
                <th title="label" class="label">Label</th>
                <th title="conceptual-dataset" class="conceptual-dataset">Conceptual Dataset</th>
                <th title="period" class="period">Period</th>
                <th title="analysis-unit" class="analysis-unit">Analysis Unit</th>
            </tr>
        </thead>
    </table>

    <h2 class="anchor" id="instruments">Instruments</h2>
    <table id="instrument-table" class="table table-striped table-bordered">
        <thead>
            <tr class="search-header">
                <th class="instrument"></th>
                <th class="label"></th>
                <th class="period"></th>
                <th class="type_position"></th>
                <th class="type"></th>
                <th class="mode"></th>
                <th class="attachments"></th>
            </tr>
            <tr class="header">
                <th title="instrument" class="instrument">Instrument</th>
                <th title="label" class="label">Label</th>
                <th title="period" class="period">Period</th>
                <th title="type_position" class="type_position"></th>
                <th title="type" class="type">Type</th>
                <th title="mode" class="mode">Mode</th>
                <th title="attachments" class="attachments">Attachments</th>
            </tr>
        </thead>
    </table>

    {% render_bundle 'instrument_table' 'js' %}
    {% render_bundle 'dataset_table' 'js' %}

{% endblock content %}
